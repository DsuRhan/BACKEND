//src/prisma/schema/transaction.prisma
model Transaction {
  id        String       @id @default(uuid()) @db.Uuid
  userId    String       @db.Uuid
  user      User              @relation(fields: [userId], references: [id])
  total     Decimal           @db.Decimal(10, 2)
  items     TransactionItem[] 
  
  createdAt DateTime          @default(now())
  updatedAt DateTime          @updatedAt
  deletedAt DateTime?         @db.Timestamptz

  @@map("transactions")
}

// Tabel Pivot (Penghubung)
model TransactionItem {
  id            String       @id @default(uuid()) @db.Uuid
  transactionId String       @db.Uuid
  transaction   Transaction  @relation(fields: [transactionId], references: [id])
  productId     String       @db.Uuid
  product       Product      @relation(fields: [productId], references: [id])
  quantity      Int
  priceAtTime   Decimal     @db.Decimal(10, 2)
  
  @@map("transaction_items")
}

